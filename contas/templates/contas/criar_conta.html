<!doctype html>
{% load static %}
{% load widget_tweaks %}
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
     <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://kit.fontawesome.com/4a904f368d.js" crossorigin="anonymous"></script>
    <title>Cadastro de usuário</title>
  </head>
  <body>
  <div class="container-fluid bg-dark">
    <div class="row justify-content-center ">
      <div class="col-xl-8">
        <header class="bg-dark my-2">

          {% include 'fragments/navbar.html' %}

        </header>
      </div>
    </div>
  </div>


  <main class="bg-light" >
      <div class="container">


          <div class="py-4 text-center">
              <h2>Formulário de cadastro</h2>
              <p class="lead">Não se preocupe, nunca te enviaremos spams!!!</p>
          </div>


          <div class="row g-5 justify-content-center  m-0">
              <div class="col-xl-6 col-md-6">

                  <form action="{% url 'criar_conta' %}" method="post">
                      {% csrf_token %}

                      <div class="row g-3">
                          <div class="col-sm-6">
                              <div class="fieldWrapper">
                                  {{ form.first_name.errors}}
                              </div>
                              <label for="{{ form.first_name.id_for_label }}" class="form-label">{{ form.first_name.label }}</label>
                              {{ form.first_name }}
                          </div>

                          <div class="col-sm-6">
                              {{ form.last_name.errors}}
                              <label for="{{ form.last_name.id_for_label }}" class="form-label">{{ form.last_name.label }}</label>
                               {{ form.last_name }}
                          </div>

                          <div class="col-sm-12">
                              {{ form.username.errors}}
                              <label for="{{ form.username.id_for_label }}" class="form-label">{{ form.username.label }}</label>
                              <div class="input-group ">
                                  <span class="input-group-text">@</span>
                                  {% render_field form.username hx-post="contas/htmx_valida_username" hx-target="#usr-val" hx-trigger="keyup" %}
                              </div>
                              <div id="usr-val"></div>
                          </div>

                          <div class="col-sm-12">
                              {{ form.email.errors}}
                              <label for="{{ form.email.id_for_label }}" class="form-label">{{ form.email.label }}</label>
                              {% render_field form.email hx-post="contas/htmx_valida_email" hx-target="#usr-email" hx-trigger="keyup" %}
                          </div>
                          <div id="usr-email"></div>

                          <div class="col-sm-6">
                              {{ form.password.errors}}
                              <label for="{{ form.password.id_for_label }}" class="form-label">{{ form.password.label }}</label>
                              {{ form.password }}
                              <div class="invalid-feedback">

                              </div>
                          </div>

                          <div class="col-sm-6">
                              <label for="pwd_confirm" class="form-label">Confirme sua senha</label>
                              <input type="password"
                                     class="form-control"
                                     id="pwd_confirm"
                                     name="pwd_confirm"
                                     value=""
                                     hx-post="contas/htmx_valida_senha"
                                     hx-trigger="keyup"
                                     hx-target="#error_pwd"
                                     required>
                              <div id="error_pwd"></div>
                          </div>


                          <button class="w-100 btn btn-primary btn-lg" type="submit">Criar conta</button>


                      </div>

                  </form>

              </div>


          </div>
      </div>
  </main>

{% include 'fragments/footer.html' with var_position='position-stick' %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>